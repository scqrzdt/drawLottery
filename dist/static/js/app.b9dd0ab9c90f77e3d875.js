webpackJsonp([1],{NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW");function h(t,e){base(this,LSprite,[]),this.maxSpeed=70,this.minSpeed=10,this.speedUpStep=2,this.speedDownStep=2,this.currentSpeed=0,this.maxNum=10,this.currentNum=0,this.stopNum=0,this.startReel=!1,this.stopFlag=!0,this.index=t,this.vueObj=e,this.reels=[],this.indexs=[0,0,0,0],this.reels.push(new LBitmap(this.getReel())),this.reels.push(new LBitmap(this.getReel())),this.reels.push(new LBitmap(this.getReel())),this.reels.push(new LBitmap(this.reels[0].bitmapData)),this.reels[0].height=60,this.reels[0].bitmapData.height=this.reels[0].height,this.reels[0].bitmapData.setCoordinate(0,80-this.reels[0].height),this.reels[2].height=60,this.reels[2].bitmapData.height=this.reels[2].height,this.reels[3].visible=!1;for(var i=0,s=0;s<this.reels.length;s++)this.reels[s].y=i,i+=this.reels[s].height,this.addChild(this.reels[s])}h.prototype.getReel=function(){return this.currentNum>=this.maxNum&&(this.currentNum=0),this.indexs[0]=this.currentNum,this.indexs.pop(),this.indexs.unshift(this.currentNum),new LBitmapData(this.vueObj.imgList["item"+this.currentNum++])},h.prototype.onFrame=function(){this.startReel&&this.wheel()},h.prototype.wheel=function(){this.stopFlag?this.currentSpeed>this.minSpeed?this.currentSpeed-=this.speedDownStep:this.currentSpeed=this.minSpeed:this.currentSpeed<this.maxSpeed?this.currentSpeed+=this.speedUpStep:this.currentSpeed=this.maxSpeed,this.stopFlag&&this.currentSpeed<=this.minSpeed&&this.indexs[2]===this.vueObj.combination[this.stopNum][this.index]&&this.reels[1].y+this.currentSpeed>60&&(this.currentSpeed=60-this.reels[1].y,this.startReel=!1),this.setY(),this.startReel||this.vueObj.checkResult()},h.prototype.setY=function(){if(this.reels[1].y+=this.currentSpeed,this.reels[1].y+this.reels[1].height>200&&(this.reels[1].height=200-this.reels[1].y,this.reels[1].bitmapData.height=this.reels[1].height),this.reels[1].y>80?(this.reels[0].height=80,this.reels[0].y=this.reels[1].y-80):(this.reels[0].height=this.reels[1].y,this.reels[0].y=0),this.reels[0].bitmapData.height=this.reels[0].height,this.reels[0].bitmapData.setCoordinate(0,80-this.reels[0].height),this.reels[2].y=this.reels[1].y+this.reels[1].height,this.reels[2].y>200?this.reels[2].visible=!1:this.reels[2].y+80>200?(this.reels[2].height=200-this.reels[2].y,this.reels[2].bitmapData.height=this.reels[2].height):(this.reels[3].y=this.reels[2].y+this.reels[2].height,this.reels[3].y<200&&(this.reels[3].height=200-this.reels[3].y,this.reels[3].bitmapData.height=this.reels[3].height)),this.reels[0].y>0){var t=this.reels.pop();t.bitmapData=this.getReel(),t.visible=!0,this.reels.unshift(t),t.y=0,t.height=this.reels[1].y,t.bitmapData.height=t.height,t.bitmapData.setCoordinate(0,80-t.height)}this.reels[3].y>=200&&(this.reels[3].visible=!1)};var a={name:"Canvas",data:function(){return{loadingLayer:null,boxLayer:null,drawLayer:null,startLayer:null,okLayer:null,resultTextField:null,reelList:[],drawBgList:[],stopBtnList:[],imgSrc:"./static/images/",imgData:[{name:"slot_bg",path:"slot_bg.png"},{name:"draw_bg",path:"slot_draw_bg.png"},{name:"start",path:"slot_start.jpg"},{name:"stop_up",path:"slot_stop_up.png"},{name:"stop_down",path:"slot_stop_down.png"},{name:"stop_over",path:"slot_stop_over.png"},{name:"slot_ok",path:"slot_ok.png"},{name:"close",path:"slot_close.png"},{name:"item0",path:"0.png"},{name:"item1",path:"1.png"},{name:"item2",path:"2.png"},{name:"item3",path:"3.png"},{name:"item4",path:"4.png"},{name:"item5",path:"5.png"},{name:"item6",path:"6.png"},{name:"item7",path:"7.png"},{name:"item8",path:"8.png"},{name:"item9",path:"9.png"}],imgList:null,stopNum:0,combination:[[0,0,1],[0,2,4],[0,5,1],[0,1,4],[0,3,3],[0,4,1]]}},methods:{init:function(){LInit(5,"myCanvas",750,750,this.main),LSystem.screen(LStage.FULL_SCREEN)},main:function(){var t=this;for(var e in t.loadingLayer=new LoadingSample1,addChild(t.loadingLayer),t.imgData)t.imgData[e].path=t.imgSrc+t.imgData[e].path;LLoadManage.load(t.imgData,function(e){t.loadingLayer.setProgress(e)},function(e){t.imgList=e,removeChild(t.loadingLayer),t.loadingLayer=null,t.gameInit()})},gameInit:function(t){this.boxLayer=new LSprite,addChild(this.boxLayer);var e=new LBitmap(new LBitmapData(this.imgList.slot_bg));this.boxLayer.addChild(e),this.drawLayer=new LSprite,addChild(this.drawLayer);for(var i=0;i<3;i++){var s=new LBitmap(new LBitmapData(this.imgList.draw_bg));s.x=150*i+156,s.y=300,this.drawLayer.addChild(s),this.drawBgList.push(s);var a=new h(i,this);a.x=150*i+156,a.y=300,this.drawLayer.addChild(a),this.reelList.push(a);var r=new LButton(new LBitmap(new LBitmapData(this.imgList.stop_up)),new LBitmap(new LBitmapData(this.imgList.stop_down)),new LBitmap(new LBitmapData(this.imgList.stop_down)),new LBitmap(new LBitmapData(this.imgList.stop_over)));r.x=150*i+149,r.y=565,r.index=i,r.visible=!1,r.setState(LButton.STATE_DISABLE),r.addEventListener(LMouseEvent.MOUSE_UP,this.stopEvent),this.drawLayer.addChild(r),this.stopBtnList.push(r)}this.startLayer=new LSprite,addChild(this.startLayer);var n=new LButton(new LBitmap(new LBitmapData(this.imgList.start)));n.x=122,n.y=525,n.addEventListener(LMouseEvent.MOUSE_UP,this.startEvent),this.startLayer.addChild(n),this.okLayer=new LSprite,this.okLayer.visible=!1,addChild(this.okLayer);var l=new LBitmap(new LBitmapData(this.imgList.slot_ok));l.x=117,l.y=137,this.okLayer.addChild(l);var p=new LButton(new LBitmap(new LBitmapData(this.imgList.close)));p.x=320,p.y=480,p.addEventListener(LMouseEvent.MOUSE_UP,this.closeResult),this.okLayer.addChild(p),this.resultTextField=new LTextField,this.resultTextField.x=367,this.resultTextField.y=310,this.resultTextField.font="微软雅黑",this.resultTextField.color="#FADB43",this.resultTextField.size=78,this.resultTextField.weight="bolder",this.resultTextField.textAlign="center",this.okLayer.addChild(this.resultTextField),this.boxLayer.addEventListener(LEvent.ENTER_FRAME,this.onFrame)},stopEvent:function(t,e){this.reelList[e.index].stopFlag=!0,e.setState(LButton.STATE_DISABLE)},startEvent:function(t){this.startLayer.visible=!1,this.stopNum=Math.floor(Math.random()*(this.combination.length/3));for(var e=1;e<3;e++)this.stopBtnList[e].setState(LButton.STATE_ENABLE),this.stopBtnList[e].visible=!0,this.reelList[e].startReel=!0,this.reelList[e].stopFlag=!1,this.reelList[e].stopNum=this.stopNum},onFrame:function(){for(var t=0;t<3;t++)this.reelList[t].onFrame()},checkResult:function(){for(var t=0,e=0;e<3;e++)this.reelList[e].startReel||t++;if(t>=3){for(e=0;e<3;e++)this.stopBtnList[e].visible=!1;this.okLayer.visible=!0;var i=this.combination[this.stopNum];i.shift(),this.resultTextField.text=i.join(""),this.resultTextField.speed=10,this.resultTextField.wind()}},closeResult:function(){this.okLayer.visible=!1,this.startLayer.visible=!0}},mounted:function(){this.init()}},r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"myCanvas"}},[this._v("loading……")])},staticRenderFns:[]};var n={name:"App",components:{Canvas:i("VU/8")(a,r,!1,function(t){i("n0Iu")},"data-v-06be3bbc",null).exports}},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("Canvas")],1)},staticRenderFns:[]};var p=i("VU/8")(n,l,!1,function(t){i("X1Gg")},null,null).exports;s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:p},template:"<App/>"})},X1Gg:function(t,e){},n0Iu:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b9dd0ab9c90f77e3d875.js.map